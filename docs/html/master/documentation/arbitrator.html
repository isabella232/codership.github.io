<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Galera Cluster Arbitrator" name="title" />
<meta content="Galera Arbitrator serves can function as an odd node to avoid split-brain and can be useful in making back-ups." name="description" />
<meta content="en-US" name="language" />
<meta content="galera cluster, mysql, mariadb, arbitrator, garbd" name="keywords" />
<meta content="Codership Oy, 2014 - 2019. All Rights Reserved." name="copyright" />

    <title>Galera Arbitrator &#8212; Galera Cluster Documentation</title>
    
    <link rel="stylesheet" href="../_static/reset-style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Backing Up Cluster Data" href="backup-cluster.html" />
    <link rel="prev" title="Using Streaming Replication" href="using-sr.html" />


<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<link rel="stylesheet" href="/library/_static/basic-style.css">
<link rel="stylesheet" href="/library/_static/header.css">
<link rel="stylesheet" href="/library/_static/footer.css">
<link rel="stylesheet" href="/library/_static/codership.css">

<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Feed" href="https://galeracluster.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Comments Feed" href="https://galeracluster.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Support Comments Feed" href="https://galeracluster.com/support/feed/" />

<script type='text/javascript' src='https://galeracluster.com/wp-includes/js/comment-reply.min.js?ver=3.8.3'></script>

<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://galeracluster.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://galeracluster.com/wp-includes/wlwmanifest.xml" />
<link rel='prev' title='Downloads' href='https://galeracluster.com/downloads/' />
<link rel='next' title='Community' href='https://galeracluster.com/community/' />
<meta name="generator" content="WordPress 3.8.3" />

<link rel='shortlink' href='https://galeracluster.com/?p=12' />

<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="twentythirteen-header-css">
			.site-title,
			.site-description {
				position: absolute;
				clip: rect(1px 1px 1px 1px); /* IE7 */
				clip: rect(1px, 1px, 1px, 1px);
			}
				.site-header .home-link {
				min-height: 0;
			}
</style>

<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-35163478-6']);
		  _gaq.push(['_trackPageview']);

		  (function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();

</script>

  </head>
  <body role="document">
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
	</script>

	<div id="page" class="hfeed site">

	<header id="masthead" class="site-header" role="banner">

	<div class="top">
	<a class="home-link" href="https://galeracluster.com/" title="Galera Cluster for MySQL" rel="home">
	<h1 class="site-title">Galera Cluster for MySQL</h1>
	<h2 class="site-description">The world&#039;s most advanced open source database cluster</h2>
	</a>
	</div>


	<div id="navbar" class="navbar">
	<nav id="site-navigation" class="navigation main-navigation" role="navigation">
	<div class="menu-main-menu-container">

	<ul id="menu-main-menu" class="nav-menu">
	<li id="menu-item-359" class="link-home menu-item menu-item-type-post_type menu-item-object-page menu-item-359"><a href="https://galeracluster.com/">Home</a></li>
	<li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-35"><a href="https://galeracluster.com/products/">Products</a></li>
	<li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-34"><a href="https://galeracluster.com/downloads/">Downloads</a></li>
	<li id="menu-item-33" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-12 current_page_item current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-33"><a href="https://galeracluster.com/support/">Support</a></li>
	<li id="menu-item-32" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-32"><a href="https://galeracluster.com/community/">Community</a></li>
	<li id="menu-item-31" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-31"><a href="https://galeracluster.com/company/">Company</a></li>
	<li id="menu-item-297" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-297"><a href="https://galeracluster.com/category/blog/">Blog</a></li>
	<li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="https://galeracluster.com/contact-us/">Contact us</a></li>
	</ul>
	</div>


	</nav><!-- #site-navigation -->

	</div><!-- #navbar -->
	</header><!-- #masthead -->


  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="left-margin container">
<div class="left-margin-top container">
<a class="reference internal" href="../index.html"><span class="doc">The Library</span></a></div>
<div class="left-margin-content container">
<ul class="here simple">
<li><a class="reference internal" href="index.html"><span class="doc">Documentation</span></a></li>
</ul>
<ul class="simple">
<li><a class="reference internal" href="../kb/index.html"><span class="doc">Knowledge Base</span></a></li>
<li><a class="reference internal" href="../training/index.html"><span class="doc">Training</span></a></li>
</ul>
<ul class="sub-links simple">
<li><a class="reference internal" href="../training/tutorials/index.html"><span class="doc">Tutorial Articles</span></a></li>
<li><a class="reference internal" href="../training/videos/index.html"><span class="doc">Training Videos</span></a></li>
</ul>
<ul class="simple">
<li><a class="reference internal" href="../faq.html"><span class="doc">FAQ</span></a></li>
</ul>
<p>Related Documents</p>
<ul class="simple">
<li><a class="reference internal" href="backup-cluster.html"><span class="doc">Backing Up Cluster Data</span></a></li>
<li><a class="reference internal" href="galera-parameters.html"><span class="doc">Galera Parameters</span></a></li>
</ul>
<p>Related Articles</p>
</div>
</div>
<div class="library-document section" id="galera-arbitrator">
<span id="arbitrator"></span><h1>Galera Arbitrator<a class="headerlink" href="#galera-arbitrator" title="Permalink to this headline">Â¶</a></h1>
<span class="target" id="index-0"></span><span class="target" id="index-1"></span><p id="index-2">When deploying a Galera Cluster, it&#8217;s recommended that you use a minimum of three instances: Three nodes, three data centers and so on.</p>
<p>If the cost of adding resources (e.g., a third data center) is too much, you can use <a class="reference internal" href="glossary.html#term-galera-arbitrator"><span class="xref std std-term">Galera Arbitrator</span></a>.  Galera Arbitrator is a member of a cluster that participates in voting, but not in the actual replication.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">While Galera Arbitrator does not participate in replication, it does receive the same data as all other nodes.  You must secure its network connection.</p>
</div>
<p>Galera Arbitrator serves two purposes: When you have an even number of nodes, it functions as an odd node, to avoid split-brain situations. It can also request a consistent application state snapshot, which is useful in making backups.</p>
<div class="figure">
<img alt="../_images/arbitrator.png" src="../_images/arbitrator.png" />
</div>
<p><em>Galera Arbitrator</em></p>
<p>If one datacenter fails or loses its <abbr title="Wide Area Network">WAN</abbr> connection, the node that sees the arbitrator&#8212;and by extension sees clients&#8212;continues operation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even though Galera Arbitrator doesn&#8217;t store data, it must see all replication traffic.  Placing Galera Arbitrator in a location with poor network connectivity to the rest of the cluster may lead to poor cluster performance.</p>
</div>
<p>In the event that Galera Arbitrator fails, it won&#8217;t affect cluster operation.  You can attach a new instance to the cluster at any time and there can be several instances running in the cluster.</p>
<p>For more information on using Galera Arbitrator for making backups, see <a class="reference internal" href="backup-cluster.html"><span class="doc">Backing Up Cluster Data</span></a>.</p>
<p class="section-heading rubric" id="starting-arbitrator">Starting Galera Arbitrator</p>
<p>Galera Arbitrator is a separate daemon from Galera Cluster, called <code class="docutils literal"><span class="pre">garbd</span></code>.  This means that you must start it separately from the cluster.  It also means that you cannot configure Galera Arbitrator through the <code class="docutils literal"><span class="pre">my.cnf</span></code> configuration file.</p>
<p>How you configure Galera Arbitrator depends on how you start it.  That is to say, whether it runs from the shell or as a service. These two methods are described in the next two sections.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When Galera Arbitrator starts, the script executes a <code class="docutils literal"><span class="pre">sudo</span></code> statement as the user <code class="docutils literal"><span class="pre">nobody</span></code> during its process.  There is a particular issue in Fedora and some other distributions of Linux, in which the default <code class="docutils literal"><span class="pre">sudo</span></code> configuration will block users that operate without <code class="docutils literal"><span class="pre">tty</span></code> access.  To correct this, edit with a text editor the <code class="docutils literal"><span class="pre">/etc/sudoers</span></code> file and comment out this line:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>Defaults requiretty
</pre></div>
</div>
<p class="last">This will prevent the operating system from blocking Galera Arbitrator.</p>
</div>
<p class="section-heading rubric" id="arbitrator-shell-start">Starting Galera Arbitrator from the Shell</p>
<p>When starting Galera Arbitrator from the shell, you have two options as to how you may configure it.  You can set the parameters through the command line arguments, as in the example here:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> garbd --group<span class="o">=</span>example_cluster <span class="se">\</span>
     --address<span class="o">=</span><span class="s2">&quot;gcomm://192.168.1.1,192.168.1.2,192.168.1.3&quot;</span> <span class="se">\</span>
     --option<span class="o">=</span><span class="s2">&quot;socket.ssl_key=/etc/ssl/galera/server-key.pem;socket.ssl_cert=/etc/ssl/galera/server-cert.pem;socket.ssl_ca=/etc/ssl/galera/ca-cert.pem;socket.ssl_cipher=AES128-SHA256&quot;&quot;</span>
</pre></div>
</div>
<p>If you use SSL, it&#8217;s necessary to specify the cipher. Otherwise, after initializing the ssl context an error will occur with a message saying, &#8220;Terminate called after throwing an instance of &#8216;gu::NotSet&#8217;&#8221;.</p>
<p>If you don&#8217;t want to enter the options every time you start Galera Arbitrator from the shell, you can set the options in the <code class="docutils literal"><span class="pre">arbtirator.config</span></code> configuration file:</p>
<div class="highlight-linux-config"><div class="highlight"><pre><span></span><span class="c1"># arbtirator.config</span>
group <span class="o">=</span> example_cluster
address <span class="o">=</span> gcomm://192.168.1.1,192.168.1.2,192.168.1.3
</pre></div>
</div>
<p>Then, to enable those options when you start Galera Arbitrator, use the <code class="docutils literal"><span class="pre">--cfg</span></code> option like so:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> garbd --cfg /path/to/arbitrator.config
</pre></div>
</div>
<p>For more information on the options available to Galera Arbitrator through the shell, run <code class="docutils literal"><span class="pre">garbd</span></code> with the <code class="docutils literal"><span class="pre">--help</span></code> argument.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> garbd --help

<span class="go">Usage: garbd [options] [group address]</span>

<span class="go">Configuration:</span>
<span class="go">  -d [ --daemon ]       Become daemon</span>
<span class="go">  -n [ --name ] arg     Node name</span>
<span class="go">  -a [ --address ] arg  Group address</span>
<span class="go">  -g [ --group ] arg    Group name</span>
<span class="go">  --sst arg             SST request string</span>
<span class="go">  --donor arg           SST donor name</span>
<span class="go">  -o [ --options ] arg  GCS/GCOMM option list</span>
<span class="go">  -l [ --log ] arg      Log file</span>
<span class="go">  -c [ --cfg ] arg      Configuration file</span>

<span class="go">Other options:</span>
<span class="go">  -v [ --version ]      Print version</span>
<span class="go">  -h [ --help ]         Show help message</span>
</pre></div>
</div>
<p>In addition to the standard configuration, any parameter available to Galera Cluster also works with Galera Arbitrator, except for those prefixed by <code class="docutils literal"><span class="pre">repl</span></code>.  When you start it from the shell, you can set those using the <code class="docutils literal"><span class="pre">--option</span></code> argument.</p>
<p>For more information on the options available to Galera Arbitrator, see <a class="reference internal" href="galera-parameters.html"><span class="doc">Galera Parameters</span></a>.</p>
<p class="section-heading rubric" id="arbitrator-service-start">Starting Galera Arbitrator as a Service</p>
<p>When starting Galera Aribtrator as a service, whether using <code class="docutils literal"><span class="pre">init</span></code> or <code class="docutils literal"><span class="pre">systemd</span></code>, you would use a different format for the configuration file than you would use when starting it from the shell. Below is an example of the configuration file:</p>
<div class="highlight-linux-config"><div class="highlight"><pre><span></span><span class="c1"># Copyright (C) 2013-2015 Codership Oy</span>
<span class="c1"># This config file is to be sourced by garbd service script.</span>

<span class="c1"># A space-separated list of node addresses (address[:port]) in the cluster:</span>
GALERA_NODES=&quot;192.168.1.1:4567 <span class="mi">192</span>.168.1.2:4567&quot;

<span class="c1"># Galera cluster name, should be the same as on the rest of the node.</span>
GALERA_GROUP=&quot;example_wsrep_cluster&quot;

<span class="c1"># Optional Galera internal options string (e.g. SSL settings)</span>
<span class="c1"># see https://galeracluster.com/documentation-webpages/galeraparameters.html</span>
GALERA_OPTIONS=&quot;socket.ssl_cert=/etc/galera/cert/cert.pem;socket.ssl_key=/$&quot;

<span class="c1"># Log file for garbd. Optional, by default logs to syslog</span>
LOG_FILE=&quot;/var/log/garbd.log&quot;
</pre></div>
</div>
<p>In order for Galera Arbitrator to use the configuration file, you must place it in a file directory where your system looks for service configuration files.  There is no standard location for this directory; it varies from distribution to distribution, though it usually in <code class="docutils literal"><span class="pre">/etc</span></code> and at least one sub-directory down. Some common locations include:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">/etc/defaults/</span></code></li>
<li><code class="docutils literal"><span class="pre">/etc/init.d/</span></code></li>
<li><code class="docutils literal"><span class="pre">/etc/systemd/</span></code></li>
<li><code class="docutils literal"><span class="pre">/etc/sysconfig/</span></code></li>
</ul>
<p>Check the documentation for the operating system distribution your server uses to determine where to place service configuration files.</p>
<p>Once you have the service configuration file in the right location, you can start the <code class="docutils literal"><span class="pre">garb</span></code> service.  For systems that use <code class="docutils literal"><span class="pre">init</span></code>, run the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> service garb start
</pre></div>
</div>
<p>For systems that run <code class="docutils literal"><span class="pre">systemd</span></code>, use instead this command:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">#</span> systemctl start garb
</pre></div>
</div>
<p>This starts Galera Arbitrator as a service.  It uses the parameters set in the configuration file.</p>
<p>In addition to the standard configuration, any parameter available to Galera Cluster also works with Galera Arbitrator, excepting those prefixed by <code class="docutils literal"><span class="pre">repl</span></code>.  When you start it as a service, you can set those using the <code class="docutils literal"><span class="pre">GALERA_OPTIONS</span></code> parameter.</p>
<p>For more information on the options available to Galera Arbitrator, see <a class="reference internal" href="galera-parameters.html"><span class="doc">Galera Parameters</span></a>.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">The Codership Documentation</a><ul>
  <li><a href="administration.html">Galera Cluster Administration</a><ul>
      <li>Previous: <a href="using-sr.html" title="previous chapter">Using Streaming Replication</a></li>
      <li>Next: <a href="backup-cluster.html" title="next chapter">Backing Up Cluster Data</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
	<div class="navbar">
	<nav id="site-navigation" class="navigation main-navigation" role="navigation">
	<div class="nav-bar-container">

	<div id="menu-nav-bar" class="nav-menu">
		<ul class="nav-link">
			<li> </li>

		</ul>

	</div>
	</nav>

	<footer id="colophon" class="site-footer" role="contentinfo">
	<div class="top">	<div class="powered-by"><p>Powered by Galera:</p>
	<p><a href="https://mariadb.com/kb/en/galera/"><img class="alignleft size-full wp-image-237" alt="MariaDB" src="https://galeracluster.com/wp-content/uploads/2013/10/logo-mariadb.png" width="166" height="49" /></a></p>
		</div></div>
	<div class="footer-menu">
	<div class="menu-main-menu-container">
	<ul id="menu-main-menu-1" class="nav-menu">
	<li class="link-home menu-item menu-item-type-post_type menu-item-object-page menu-item-359"><a href="https://galeracluster.com/">Home</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-35"><a href="https://galeracluster.com/products/">Products</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-34"><a href="https://galeracluster.com/downloads/">Downloads</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-12 current_page_item current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-33"><a href="https://galeracluster.com/support/">Support</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-32"><a href="https://galeracluster.com/community/">Community</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-31"><a href="https://galeracluster.com/company/">Company</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-297"><a href="https://galeracluster.com/category/blog/">Blog</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="https://galeracluster.com/contact-us/">Contact us</a></li>
	</ul></div>			</div><!-- .footer-menu -->


	<div class="footer-bar">
	<p class="copyright">2014 Codership Ltd.</p>
	</div>
	<div class="footnote">
	<h2>Your data is invaluable. We're here to secure it. All of it.</h2>
	</div>
	</footer><!-- #colophon -->




  </body>
</html>