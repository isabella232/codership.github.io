<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Galera Cluster Knowledge Base" name="title" />
<meta content="en-US" name="language" />
<meta content="Codership Oy, 2014 - 2019. All Rights Reserved." name="copyright" />

    <title>The Codership Knowledge Base &#8212; Galera Cluster Documentation</title>
    
    <link rel="stylesheet" href="../_static/reset-style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Node Crashes during SST" href="node-crash-during-sst.html" />
    <link rel="prev" title="Glossary" href="../documentation/glossary.html" />


<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<link rel="stylesheet" href="/library/_static/basic-style.css">
<link rel="stylesheet" href="/library/_static/header.css">
<link rel="stylesheet" href="/library/_static/footer.css">
<link rel="stylesheet" href="/library/_static/codership.css">

<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Feed" href="https://galeracluster.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Comments Feed" href="https://galeracluster.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Support Comments Feed" href="https://galeracluster.com/support/feed/" />

<script type='text/javascript' src='https://galeracluster.com/wp-includes/js/comment-reply.min.js?ver=3.8.3'></script>

<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://galeracluster.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://galeracluster.com/wp-includes/wlwmanifest.xml" />
<link rel='prev' title='Downloads' href='https://galeracluster.com/downloads/' />
<link rel='next' title='Community' href='https://galeracluster.com/community/' />
<meta name="generator" content="WordPress 3.8.3" />

<link rel='shortlink' href='https://galeracluster.com/?p=12' />

<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="twentythirteen-header-css">
			.site-title,
			.site-description {
				position: absolute;
				clip: rect(1px 1px 1px 1px); /* IE7 */
				clip: rect(1px, 1px, 1px, 1px);
			}
				.site-header .home-link {
				min-height: 0;
			}
</style>

<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-35163478-6']);
		  _gaq.push(['_trackPageview']);

		  (function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();

</script>

  </head>
  <body role="document">
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
	</script>

	<div id="page" class="hfeed site">

	<header id="masthead" class="site-header" role="banner">

	<div class="top">
	<a class="home-link" href="https://galeracluster.com/" title="Galera Cluster for MySQL" rel="home">
	<h1 class="site-title">Galera Cluster for MySQL</h1>
	<h2 class="site-description">The world&#039;s most advanced open source database cluster</h2>
	</a>
	</div>


	<div id="navbar" class="navbar">
	<nav id="site-navigation" class="navigation main-navigation" role="navigation">
	<div class="menu-main-menu-container">

	<ul id="menu-main-menu" class="nav-menu">
	<li id="menu-item-359" class="link-home menu-item menu-item-type-post_type menu-item-object-page menu-item-359"><a href="https://galeracluster.com/">Home</a></li>
	<li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-35"><a href="https://galeracluster.com/products/">Products</a></li>
	<li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-34"><a href="https://galeracluster.com/downloads/">Downloads</a></li>
	<li id="menu-item-33" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-12 current_page_item current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-33"><a href="https://galeracluster.com/support/">Support</a></li>
	<li id="menu-item-32" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-32"><a href="https://galeracluster.com/community/">Community</a></li>
	<li id="menu-item-31" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-31"><a href="https://galeracluster.com/company/">Company</a></li>
	<li id="menu-item-297" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-297"><a href="https://galeracluster.com/category/blog/">Blog</a></li>
	<li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="https://galeracluster.com/contact-us/">Contact us</a></li>
	</ul>
	</div>


	</nav><!-- #site-navigation -->

	</div><!-- #navbar -->
	</header><!-- #masthead -->


  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="left-margin container">
<div class="left-margin-top container">
<a class="reference internal" href="../index.html"><span class="doc">The Library</span></a></div>
<div class="left-margin-content container">
<ul class="simple">
<li><a class="reference internal" href="../documentation/index.html"><span class="doc">Documentation</span></a></li>
</ul>
<ul class="here simple">
<li><a class="reference internal" href="#"><span class="doc">Knowledge Base</span></a></li>
</ul>
<ul class="simple">
<li><a class="reference internal" href="../training/index.html"><span class="doc">Training</span></a></li>
</ul>
<ul class="sub-links simple">
<li><a class="reference internal" href="../training/tutorials/index.html"><span class="doc">Tutorial Articles</span></a></li>
<li><a class="reference internal" href="../training/videos/index.html"><span class="doc">Training Videos</span></a></li>
</ul>
<ul class="simple">
<li><a class="reference internal" href="../faq.html"><span class="doc">FAQ</span></a></li>
</ul>
</div>
</div>
<div class="library-index section" id="the-codership-knowledge-base">
<span id="kb"></span><h1>The Codership Knowledge Base<a class="headerlink" href="#the-codership-knowledge-base" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="../documentation/index.html"><span class="doc">The Codership Documentation</span></a> explains in detail how to deploy and administer a Galera Cluster. This section, the Codership Knowledge Base (KB) contains information on resolving problems and improving use of Galera Cluster.  Here you&#8217;ll find troubleshooting articles and best practices articles.</p>
<p>In essence, the Documentation is how to use Galera assuming everything goes according to plan; the KB is for when things don&#8217;t go as expected or when they could be better.</p>
<p>In addition to this KB, you can also post questions on the <a class="reference external" href="https://galeracluster.com/community/">Codership Forum</a>. The community, as well as our staff monitor and respond to posts made there. If you need more immediate and personalized assistance, you can get a Support contract with us at Codership.  For a quote on the cost of support, write us at <a class="reference external" href="mailto:info&#37;&#52;&#48;codership&#46;com">info<span>&#64;</span>codership<span>&#46;</span>com</a> or use <a class="reference external" href="https://galeracluster.com/contact-us/#send-us-a-message">our on-line form</a> to send us a message.</p>
<div class="section" id="troubleshooting-articles">
<span id="kb-trouble"></span><h2>Troubleshooting Articles<a class="headerlink" href="#troubleshooting-articles" title="Permalink to this headline">¶</a></h2>
<p>This is the Troubleshooting section of the Galera Knowledge Base (KB). It contains information on resolving problems you might experience with Galera Cluster. It includes articles on how to diagnose and address various performance and replication trouble. For articles related to performance and other ways to improve usage of Galera Cluster, see the next section, <a class="reference internal" href="#kb-best"><span class="std std-ref">Best Practices</span></a>.</p>
<div class="banner container" id="kb-trouble-state-transfers">
<p class="section-heading rubric">State Transfers</p>
</div>
<div class="list-col1 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="node-crash-during-sst.html"><span class="doc">Node Crashes during SST</span></a></p>
<p class="list-stats">Length: 463 words; Updated: Nov 2019</p>
<p class="list-abstract">If a donor node crashes while using <code class="docutils literal"><span class="pre">rsync</span></code> for a state transfers, the joiner node may stall with incomplete databases, and be inaccessibe. This article discusses how to resolve this.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="sst-fails-sql-syntax-error.html"><span class="doc">SST Fails due to SQL Syntax Errors</span></a></p>
<p class="list-stats">Length: 789 words; Updated: Nov 2019</p>
<p class="list-abstract">When using <code class="docutils literal"><span class="pre">mysqldump</span></code> for state transfers for a new node, it may fail. In the database error log, there may be entries that says there were SQL Syntax errors.</p>
</div>
<div class="list-col2 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="requested-state-transfer-failed.html"><span class="doc">Requested State Transfer Failed</span></a></p>
<p class="list-stats">Length: 649 words; Updated: Nov 2019</p>
<p class="list-abstract">When a new node joins a cluster, it will try to get a full copy of the databases from one of the other nodes.  Sometimes its request will be ignored and no node is selected to be the donor.</p>
</div>
<div class="banner container" id="kb-trouble-sql-syntax">
<p class="section-heading rubric">Schema &amp; SQL</p>
</div>
<div class="list-col1 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="stall-on-alter-table.html"><span class="doc">Cluster Stalls on ALTER TABLE</span></a></p>
<p class="list-stats">Length: 519 words; Updated: Oct 2019:</p>
<p class="list-abstract">A cluster will sometimes stall when executing <code class="docutils literal"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code> on a table with several columns and indexes. Depending on the number of rows, it can be a major drain on performance.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="user-changes.html"><span class="doc">User Changes not Replicating</span></a></p>
<p class="list-stats">Length: 518 words; Updated: Sep 2019</p>
<p class="list-abstract">Changes to the <code class="docutils literal"><span class="pre">mysql</span></code> database (e.g., user name, host address) are not replicated on other nodes. This can cause problems for users, as well as frustrate the DBA.</p>
</div>
<div class="list-col2 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="auto-increment-multiples.html"><span class="doc">AUTO_INCREMENT Increasing by Multiples</span></a></p>
<p class="list-stats">Length: 995 words; Published: Oct 2019</p>
<p class="list-abstract">Key columns using <code class="docutils literal"><span class="pre">AUTO_INCREMENT</span></code> will increase values by more than one with Galera. This can be confusing and worrisome, but this article explains why this is a good method.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="resolve-commit-failure.html"><span class="doc">Commit Failed for Reason 3</span></a></p>
<p class="list-stats">Length: 326 words; Updated: Nov 2019</p>
<p class="list-abstract">When you have <code class="docutils literal"><span class="pre">wsrep_debug</span></code> turned <code class="docutils literal"><span class="pre">ON</span></code>, you may occasionally see a message noting that a commit has failed due to reason <code class="docutils literal"><span class="pre">3</span></code>.</p>
</div>
<div class="banner container" id="kb-trouble-splits-topology">
<p class="section-heading rubric">Splits &amp; Topology</p>
</div>
<div class="list-col1 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="multi-master-conflicts.html"><span class="doc">Multi-Master Conflicts</span></a></p>
<p class="list-stats">Length: 751 words; Published:</p>
<p class="list-abstract">Multi-master clusters have certain types of conflicts and can involve data inconsistencies among nodes. This article explains the nuances of Galera and how to prevent them.</p>
</div>
<div class="list-col2 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="error-unknown-command.html"><span class="doc">Unknown Command Errors</span></a></p>
<p class="list-stats">Length: 971 words; Updated: Nov 2019</p>
<p class="list-abstract">Instead of receiving results from a valid SQL statement, an error message is returned saying, &#8220;Unknown Command&#8221; on one node. This error is returned for all queries on the node.</p>
</div>
</div>
<div class="section" id="best-practices-articles">
<span id="kb-best"></span><h2>Best Practices Articles<a class="headerlink" href="#best-practices-articles" title="Permalink to this headline">¶</a></h2>
<p>Whereas the <a class="reference internal" href="#kb-trouble"><span class="std std-ref">Troubleshooting</span></a> section relates to handling problems with a cluster, this section of the KB provide information and guidance on improving the performance of a cluster and optimizing configuration of the nodes.</p>
<div class="banner container" id="kb-best-performance">
<p class="section-heading rubric">Performance</p>
</div>
<div class="list-col1 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="group-commit.html"><span class="doc">Group Commit</span></a></p>
<p class="list-stats">Length: 322 words; Published:</p>
<p class="list-abstract">When several transactions try to commit simultaneously, <code class="docutils literal"><span class="pre">GROUP</span> <span class="pre">COMMIT</span></code> flushes them to the disk with a single system call, rather than a call for each, greatly improving performance.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="large-transactions.html"><span class="doc">Large Transactions</span></a></p>
<p class="list-stats">Length: 443 words; Published:</p>
<p class="list-abstract">Large transactions can lead to diminished performance. One reason for this is that the table may be reindexing and rescanning after each row is deleted.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="parallel-slave-threads.html"><span class="doc">Parallel Slave Threads</span></a></p>
<p class="list-stats">Length: 366 words; Published:</p>
<p class="list-abstract">Parallel threads don&#8217;t ensure better performance, but they don&#8217;t impair performance and they may actually increase synchronization of new nodes joining a cluster.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="detecting-slow-node.html"><span class="doc">Slow Nodes</span></a></p>
<p class="list-stats">Length: 297 words; Published:</p>
<p class="list-abstract">By design, cluster performance won&#8217;t be higher than the slowest node. Even with only one node, its performance can be considerably slower compared to stand-alone mode.</p>
</div>
<div class="list-col2 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="wan-latency.html"><span class="doc">WAN Latency</span></a></p>
<p class="list-stats">Length: 221 words; Published:</p>
<p class="list-abstract">When using Galera over a WAN, links can have exceptionally high latency. Check this by measuring the Round-Trip Time among nodes, and correct it by adjusting temporal parameters.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="wan-replication.html"><span class="doc">WAN Replication</span></a></p>
<p class="list-stats">Length: 161 words; Published:</p>
<p class="list-abstract">When running a cluster over a WAN, there may be transient network connectivity failures. To prevent this from partitioning the cluster, try increasing the <em>keep-alive</em> timeouts.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="customizing-gcache-size.html"><span class="doc">Write-Set Cache Size</span></a></p>
<p class="list-stats">Length: 467 words; Published:</p>
<p class="list-abstract">If you have storage issues, there are some guidelines to adjust the <code class="docutils literal"><span class="pre">gcache.size</span></code> parameter, properly. You could also change your state snapshot method.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="gcache-during-state-transfers.html"><span class="doc">Write-Set Caching during State Transfers</span></a></p>
<p class="list-stats">Length: 156 words; Published:</p>
<p class="list-abstract">Galera nodes don&#8217;t use much more memory than a stand-alone. The certification index and uncommitted write-sets drain some. Write-set caching during state transfers is the exception.</p>
</div>
<div class="banner container" id="kb-best-topology">
<p class="section-heading rubric">Topology</p>
</div>
<div class="list-col1 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="single-master-setup.html"><span class="doc">Single Master Setup</span></a></p>
<p class="list-stats">Length: 81 words; Published:</p>
<p class="list-abstract">It&#8217;s possible to designate one node in a cluster to handle all writes, to be the <em>master</em> to the other nodes. To do this, there are certain configuratoin requirements.</p>
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="multi-master-setup.html"><span class="doc">Multi-Master Setup</span></a></p>
<p class="list-stats">Length: 55 words; Published:</p>
<p class="list-abstract">The more <em>masters</em> in a cluster, the higher the probability of certification conflicts. This can lead to undesirable rollbacks and performance degradation.</p>
</div>
<div class="list-col2 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="two-node-clusters.html"><span class="doc">Two-Node Clusters</span></a></p>
<p class="list-stats">Length: 880 words; Updated: Nov 2019</p>
<p class="list-abstract">There are potential problems with two-node clusters: A split-brain situation may occur. When one node fails, the remaining node becomes non-operational.</p>
</div>
<div class="banner container" id="kb-best-security">
<p class="section-heading rubric">Security &amp; SQL</p>
</div>
<div class="list-col1 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="setting-selinux-policy.html"><span class="doc">Setting an SELinux Policy</span></a></p>
<p class="list-stats">Length: 345 words; Updated: Oct 2019</p>
<p class="list-abstract">When you first installing a node, SELinux will prohibit cluster activities. You will need a SELinux policy so it will recognize cluster activities as legitimate.</p>
</div>
<div class="list-col2 container">
<p class="rubric-2 list-sub-header rubric"><a class="reference internal" href="sync-transaction-before-another.html"><span class="doc">Synch a Transaction First</span></a></p>
<p class="list-stats">Length: 994 words; Updated: Nov 2019</p>
<p class="list-abstract">When entering a transaction, you may need to ensure a previous transaction has been committed on the current node. Synchronization functions can make this easier to do.</p>
</div>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The Codership Knowledge Base</a><ul>
<li><a class="reference internal" href="#troubleshooting-articles">Troubleshooting Articles</a></li>
<li><a class="reference internal" href="#best-practices-articles">Best Practices Articles</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../documentation/glossary.html" title="previous chapter">Glossary</a></li>
      <li>Next: <a href="node-crash-during-sst.html" title="next chapter">Node Crashes during SST</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
	<div class="navbar">
	<nav id="site-navigation" class="navigation main-navigation" role="navigation">
	<div class="nav-bar-container">

	<div id="menu-nav-bar" class="nav-menu">
		<ul class="nav-link">
			<li> </li>

		</ul>

	</div>
	</nav>

	<footer id="colophon" class="site-footer" role="contentinfo">
	<div class="top">	<div class="powered-by"><p>Powered by Galera:</p>
	<p><a href="https://mariadb.com/kb/en/galera/"><img class="alignleft size-full wp-image-237" alt="MariaDB" src="https://galeracluster.com/wp-content/uploads/2013/10/logo-mariadb.png" width="166" height="49" /></a></p>
		</div></div>
	<div class="footer-menu">
	<div class="menu-main-menu-container">
	<ul id="menu-main-menu-1" class="nav-menu">
	<li class="link-home menu-item menu-item-type-post_type menu-item-object-page menu-item-359"><a href="https://galeracluster.com/">Home</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-35"><a href="https://galeracluster.com/products/">Products</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-34"><a href="https://galeracluster.com/downloads/">Downloads</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-12 current_page_item current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-33"><a href="https://galeracluster.com/support/">Support</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-32"><a href="https://galeracluster.com/community/">Community</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-31"><a href="https://galeracluster.com/company/">Company</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-297"><a href="https://galeracluster.com/category/blog/">Blog</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="https://galeracluster.com/contact-us/">Contact us</a></li>
	</ul></div>			</div><!-- .footer-menu -->


	<div class="footer-bar">
	<p class="copyright">2014 Codership Ltd.</p>
	</div>
	<div class="footnote">
	<h2>Your data is invaluable. We're here to secure it. All of it.</h2>
	</div>
	</footer><!-- #colophon -->




  </body>
</html>