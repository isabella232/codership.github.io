<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Training Video Exercises |---| Standard Replication &amp; Galera Cluster" name="title" />
<meta content="en-US" name="language" />
<meta content="Codership Oy, 2014 - 2019. All Rights Reserved." name="copyright" />

    <title>Training Video Exercises &#8212; Galera Cluster Documentation</title>
    
    <link rel="stylesheet" href="../../_static/reset-style.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Monitoring a Galera Cluster" href="galera-monitoring.html" />
    <link rel="prev" title="Standard Replication &amp; Galera Cluster" href="galera-standard-replication.html" />


<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<link rel="stylesheet" href="/library/_static/basic-style.css">
<link rel="stylesheet" href="/library/_static/header.css">
<link rel="stylesheet" href="/library/_static/footer.css">
<link rel="stylesheet" href="/library/_static/codership.css">

<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Feed" href="https://galeracluster.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Comments Feed" href="https://galeracluster.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Galera Cluster for MySQL &raquo; Support Comments Feed" href="https://galeracluster.com/support/feed/" />

<script type='text/javascript' src='https://galeracluster.com/wp-includes/js/comment-reply.min.js?ver=3.8.3'></script>

<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://galeracluster.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://galeracluster.com/wp-includes/wlwmanifest.xml" />
<link rel='prev' title='Downloads' href='https://galeracluster.com/downloads/' />
<link rel='next' title='Community' href='https://galeracluster.com/community/' />
<meta name="generator" content="WordPress 3.8.3" />

<link rel='shortlink' href='https://galeracluster.com/?p=12' />

<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<style type="text/css" id="twentythirteen-header-css">
			.site-title,
			.site-description {
				position: absolute;
				clip: rect(1px 1px 1px 1px); /* IE7 */
				clip: rect(1px, 1px, 1px, 1px);
			}
				.site-header .home-link {
				min-height: 0;
			}
</style>

<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-35163478-6']);
		  _gaq.push(['_trackPageview']);

		  (function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();

</script>

  </head>
  <body role="document">
	<div id="fb-root"></div>
	<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));
	</script>

	<div id="page" class="hfeed site">

	<header id="masthead" class="site-header" role="banner">

	<div class="top">
	<a class="home-link" href="https://galeracluster.com/" title="Galera Cluster for MySQL" rel="home">
	<h1 class="site-title">Galera Cluster for MySQL</h1>
	<h2 class="site-description">The world&#039;s most advanced open source database cluster</h2>
	</a>
	</div>


	<div id="navbar" class="navbar">
	<nav id="site-navigation" class="navigation main-navigation" role="navigation">
	<div class="menu-main-menu-container">

	<ul id="menu-main-menu" class="nav-menu">
	<li id="menu-item-359" class="link-home menu-item menu-item-type-post_type menu-item-object-page menu-item-359"><a href="https://galeracluster.com/">Home</a></li>
	<li id="menu-item-35" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-35"><a href="https://galeracluster.com/products/">Products</a></li>
	<li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-34"><a href="https://galeracluster.com/downloads/">Downloads</a></li>
	<li id="menu-item-33" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-12 current_page_item current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-33"><a href="https://galeracluster.com/support/">Support</a></li>
	<li id="menu-item-32" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-32"><a href="https://galeracluster.com/community/">Community</a></li>
	<li id="menu-item-31" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-31"><a href="https://galeracluster.com/company/">Company</a></li>
	<li id="menu-item-297" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-297"><a href="https://galeracluster.com/category/blog/">Blog</a></li>
	<li id="menu-item-38" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="https://galeracluster.com/contact-us/">Contact us</a></li>
	</ul>
	</div>


	</nav><!-- #site-navigation -->

	</div><!-- #navbar -->
	</header><!-- #masthead -->


  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="left-margin container">
<div class="left-margin-top container">
<a class="reference internal" href="../../index.html"><span class="doc">The Library</span></a></div>
<div class="left-margin-content container">
<ul>
<li><p class="first"><a class="reference internal" href="../../documentation/index.html"><span class="doc">Documentation</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../../kb/index.html"><span class="doc">Knowledge Base</span></a></p>
<ul class="sub-links simple">
<li><a class="reference internal" href="../../kb/trouble/index.html"><span class="doc">Troubleshooting</span></a></li>
<li><a class="reference internal" href="../../kb/best/index.html"><span class="doc">Best Practices</span></a></li>
</ul>
<ul class="simple">
<li><a class="reference internal" href="../index.html"><span class="doc">Training</span></a></li>
</ul>
<ul class="sub-links simple">
<li><a class="reference internal" href="../tutorials/index.html"><span class="doc">Tutorial Articles</span></a></li>
</ul>
<ul class="sub-links here simple">
<li><a class="reference internal" href="index.html"><span class="doc">Training Videos</span></a></li>
</ul>
<p>Related Documents</p>
<ul class="simple">
<li><a class="reference internal" href="../../documentation/firewall-settings.html"><span class="doc">Firewall Settings</span></a></li>
<li><a class="reference internal" href="../../documentation/firewalld.html"><span class="doc">firewalld</span></a></li>
<li><a class="reference internal" href="../../documentation/install.html"><span class="doc">Installing Galera</span></a></li>
<li><a class="reference internal" href="../../documentation/node-provisioning.html"><span class="doc">Node Provisioning</span></a></li>
<li><a class="reference internal" href="../../documentation/selinux.html"><span class="doc">SELinux</span></a></li>
<li><a class="reference internal" href="../../documentation/state-transfer.html"><span class="doc">State Transfer</span></a></li>
<li><a class="reference internal" href="../../documentation/mysql-wsrep-options.html"><span class="doc">wsrep Options</span></a></li>
</ul>
<p>Related Articles</p>
<p>Other Resources</p>
<ul class="simple">
<li><a class="reference external" href="http://releases.galeracluster.com/">Galera Repository</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="library-article training-exercises section" id="training-video-exercises">
<span id="exercises-galera-standard-replication"></span><h1>Training Video Exercises<a class="headerlink" href="#training-video-exercises" title="Permalink to this headline">¶</a></h1>
<div class="section" id="standard-replication-galera-cluster">
<h2>Standard Replication &amp; Galera Cluster<a class="headerlink" href="#standard-replication-galera-cluster" title="Permalink to this headline">¶</a></h2>
<div class="video-abstract list-col2-3 container">
<p>These exercises are part of the training video, <em>Standard Replication &amp; Galera Cluster</em>.  They correspond to what was taught, but they are to be done after each of the two major parts of the training video:  the Standard Replication part, which includes the first three sections; and the Galera Cluster part, which includes the last three sections (see the outline on the page where the video is posted).</p>
<p>Before starting these exercises, make sure you have all of the requirements and preparations in place.</p>
</div>
<div class="list-col1-3 container">
<p class="training-video-resources rubric">Requirements &amp; Preparation</p>
<ul class="training-video-resources simple">
<li>Test Servers:  3</li>
<li>Operating System:  Linux</li>
<li>Open Ports:  TCP 22, TCP 3306. TCP 4444, TCP &amp; UDP 4567, TCP 4568</li>
<li>Software:  MySQL or MariaDB, Galera Cluster</li>
</ul>
<p class="training-video-resources rubric">Student Materials</p>
<ul class="training-video-resources simple">
<li><a class="reference internal" href="galera-mariadb-installing-examples.html"><span class="doc">Example Configuration</span></a></li>
<li><a class="reference external" href="https://galeracluster.com/library-media/databases/company.tgz">Company Database</a></li>
</ul>
</div>
<div class="banner container">
<p class="section-heading rubric">Exercises</p>
</div>
<p>Before starting an exercise, read it fully and carefully. The headings for each set of exercises corresponds to the section with the same name in training video.  Make notes for yourself as you go along, for when you have to do these tasks for your job or for yourself.</p>
<p class="sub-heading rubric">Standard Replication Exercises</p>
<p>Do these exercises after viewing the three sections on Standard Replication—before starting the Galera Cluster half of the training video.</p>
<ol class="list-exercises arabic simple">
<li>Configure two servers to use MySQL or MariaDB and standard replication—but not Galera Cluster.  See the link at the top in the Student Materials list for a sample configuration file.  Be sure to run on each the mysqld_secure_installation script to set the password and all. Restart the MySQL daemon on each.</li>
<li>Choose one server to be the master and the other to be the slave.   Use the <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">USER</span></code> statement on the master to create a user with the privilege <code class="docutils literal"><span class="pre">REPLICATION</span> <span class="pre">CLIENT</span></code>.  Set its host address and password.</li>
<li>Use mysqldump to dump all of the databases on the master, although it will only have the system databases.  Be sure to use the <code class="docutils literal"><span class="pre">--master-data</span></code> and <code class="docutils literal"><span class="pre">--flush-logs</span></code> option.  Then use <code class="docutils literal"><span class="pre">scp</span></code> to copy the dump file from the master to the slave. Restart <code class="docutils literal"><span class="pre">mysqld</span></code> on the slave when you finish. Use the <code class="docutils literal"><span class="pre">mysql</span></code> client to process the dump file on the slave.</li>
<li>Execute the <code class="docutils literal"><span class="pre">CHANGE</span> <span class="pre">MASTER</span></code> statement on the slave to provide the slave with the replication user name and password, and the port and IP address for communicating with the master.</li>
<li>Use the <code class="docutils literal"><span class="pre">START</span> <span class="pre">SLAVE</span></code> statement to start the slave replicating.  Use <code class="docutils literal"><span class="pre">SHOW</span> <span class="pre">SLAVE</span> <span class="pre">STATUS</span></code> to check the slave’s status and to see if there are any errors.  Execute <code class="docutils literal"><span class="pre">SHOW</span> <span class="pre">MASTER</span> <span class="pre">STATUS</span></code> on the master.  Compare the name of the master’s binary and position to the corresponding values on the slave in the results of <code class="docutils literal"><span class="pre">SHOW</span> <span class="pre">SLAVE</span> <span class="pre">STATUS</span></code>. If everything agrees and there are no error, enter a <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">DATABASE</span></code> statement on the master and see if it’s replicated on the slave.  If there are any problems, resolve them or start over.  Don’t do the next exercises until replication is working properly.</li>
<li>Download the sample database, the <code class="docutils literal"><span class="pre">company</span></code> database to the master server.  There’s one for MySQL and another for MariaDB: use the one that matches your database system. Both were created with mysqldump, so use the <code class="docutils literal"><span class="pre">mysql</span></code> client to load the data onto the master.  When you’re finished, check the slave to see if it has replicated the database and its data.</li>
</ol>
<p class="sub-heading rubric">Galera Cluster Exercises</p>
<p>Do these exercises after completing the previous exercises, and after having viewed the three sections of the training video on Galera Cluster.</p>
<ol class="list-exercises arabic simple" start="7">
<li>Edit the configuration on the two servers used for the previous exercises: remove anything added for replication.  Configure all three servers for Galera Cluster (see link in Student Materials for example). Drop the <code class="docutils literal"><span class="pre">company</span></code> database on each server.  Shutdown <code class="docutils literal"><span class="pre">myqld</span></code> on all three servers.</li>
<li>If you’ve installed MySQL, use <code class="docutils literal"><span class="pre">mysqld_boot_strap</span></code> to start one of the servers, to be the seed. If it won’t start, stop <code class="docutils literal"><span class="pre">mysqld</span></code> and review the error messages and logs to resolve the problem. When it seems to be working, use <code class="docutils literal"><span class="pre">SHOW</span> <span class="pre">STATUS</span></code>, with the <code class="docutils literal"><span class="pre">LIKE</span></code> operator, to see the wsrep parameters, to check if Galera Cluster is running.</li>
<li>Start <code class="docutils literal"><span class="pre">mysqld</span></code> on each of the other two servers.  If you get errors, review the logs to resolve ant problems.  When each starts without an error, check the status parameter, <code class="docutils literal"><span class="pre">wsrep_cluster_size</span></code> to see if the cluster size reflects the number of nodes that are running. Keep trying until you’re able to start the nodes and they all join together to form a cluster.</li>
<li>On one of the nodes, use the <code class="docutils literal"><span class="pre">mysql</span></code> client to load the dump file made for your database system.  Do this on only one node.  As soon as you’re finished, log into each of the other nodes to confirm the database and its tables have been replicated on them.</li>
</ol>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Training Video Exercises</a><ul>
<li><a class="reference internal" href="#standard-replication-galera-cluster">Standard Replication &amp; Galera Cluster</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Codership Training</a><ul>
  <li><a href="index.html">Codership Training Videos</a><ul>
  <li><a href="galera-standard-replication.html">Standard Replication &amp; Galera Cluster</a><ul>
      <li>Previous: <a href="galera-standard-replication.html" title="previous chapter">Standard Replication &amp; Galera Cluster</a></li>
      <li>Next: <a href="galera-monitoring.html" title="next chapter">Monitoring a Galera Cluster</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
	<div class="navbar">
	<nav id="site-navigation" class="navigation main-navigation" role="navigation">
	<div class="nav-bar-container">

	<div id="menu-nav-bar" class="nav-menu">
		<ul class="nav-link">
			<li> </li>

		</ul>

	</div>
	</nav>

	<footer id="colophon" class="site-footer" role="contentinfo">
	<div class="top">	<div class="powered-by"><p>Powered by Galera:</p>
	<p><a href="https://mariadb.com/kb/en/galera/"><img class="alignleft size-full wp-image-237" alt="MariaDB" src="https://galeracluster.com/wp-content/uploads/2013/10/logo-mariadb.png" width="166" height="49" /></a></p>
		</div></div>
	<div class="footer-menu">
	<div class="menu-main-menu-container">
	<ul id="menu-main-menu-1" class="nav-menu">
	<li class="link-home menu-item menu-item-type-post_type menu-item-object-page menu-item-359"><a href="https://galeracluster.com/">Home</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-35"><a href="https://galeracluster.com/products/">Products</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-34"><a href="https://galeracluster.com/downloads/">Downloads</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-12 current_page_item current-menu-ancestor current-menu-parent current_page_parent current_page_ancestor menu-item-has-children menu-item-33"><a href="https://galeracluster.com/support/">Support</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-32"><a href="https://galeracluster.com/community/">Community</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-31"><a href="https://galeracluster.com/company/">Company</a></li>
	<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-297"><a href="https://galeracluster.com/category/blog/">Blog</a></li>
	<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-38"><a href="https://galeracluster.com/contact-us/">Contact us</a></li>
	</ul></div>			</div><!-- .footer-menu -->


	<div class="footer-bar">
	<p class="copyright">2014 Codership Ltd.</p>
	</div>
	<div class="footnote">
	<h2>Your data is invaluable. We're here to secure it. All of it.</h2>
	</div>
	</footer><!-- #colophon -->




  </body>
</html>